<section class="doc-section">
  <h1>API Reference</h1>

  <p class="lead">
    This section provides a concise overview of Liana’s public API.
    It focuses on how the main components are used together, rather than
    listing every method exhaustively.
  </p>

  <p>
    Liana’s API is intentionally small and composable. Most applications
    interact with only three core types:
  </p>

  <ul>
    <li><strong>ConfigurationManager</strong> – entry point for loading configuration</li>
    <li><strong>ResourceLocation</strong> – describes where and how configuration is loaded</li>
    <li><strong>Configuration</strong> – immutable, type-safe access to resolved values</li>
  </ul>

  <!-- ====================================================== -->
  <h2>ConfigurationManager</h2>

  <p>
    <code>ConfigurationManager</code> orchestrates the configuration resolution
    pipeline. It applies defaults, coordinates providers and loaders,
    and produces an immutable <code>Configuration</code>.
  </p>

  <pre><code class="language-java">
ConfigurationManager manager = ConfigurationManager.builder().build();

Configuration configuration = manager.load(location);
  </code></pre>

  <p>
    In most cases, the default manager is sufficient. Custom providers
    and loaders can be registered via the builder when needed.
  </p>

  <!-- ====================================================== -->
  <h2>ResourceLocation</h2>

  <p>
    <code>ResourceLocation</code> describes the configuration sources to load,
    including providers, resource names, variables, and placeholder strategy.
  </p>

  <pre><code class="language-java">
ResourceLocation location = ResourceLocation.builder()
  .baseDirectories("", "config")
  .addResources(
    "application.yaml",
    "application-${profile}.yaml"
  )
  .addVariable("profile", "dev")
  .build();
  </code></pre>

  <p>
    Resources are resolved in order, and later resources override earlier ones.
    Each resource may optionally declare its own provider.
  </p>

  <!-- ====================================================== -->
  <h2>Configuration</h2>

  <p>
    <code>Configuration</code> represents the final, fully resolved
    configuration tree. It is immutable and thread-safe.
  </p>

  <pre><code class="language-java">
String appName = configuration.getString("app.name", "DefaultApp");

int port = configuration.getInt("server.port", 8080);
  </code></pre>

  <p>
    Liana supports typed access, optional access, collections,
    and record-based mapping.
  </p>

  <!-- ====================================================== -->
  <h2>Optional Access</h2>

  <p>
    When a value may not exist, use optional access methods
    instead of default fallbacks.
  </p>

  <pre><code class="language-java">
Optional&lt;String&gt; region = configuration.get("app.region", String.class);
  </code></pre>

  <!-- ====================================================== -->
  <h2>Record Mapping</h2>

  <p>
    Configuration sections can be mapped directly into Java records
    for immutable, structured access.
  </p>

  <pre><code class="language-java">
public record AppConfig(
  String name,
  int port
) {}
  </code></pre>

  <pre><code class="language-java">
AppConfig config =
  configuration.get(
    "app",
    AppConfig.class,
    new AppConfig("Default", 8080)
  );
  </code></pre>

  <!-- ====================================================== -->
  <h2>Extensibility</h2>

  <p>
    Liana can be extended by registering custom implementations
    of the following extension points:
  </p>

  <ul>
    <li><strong>ResourceProvider</strong> – resolves logical resources</li>
    <li><strong>ResourceLoader</strong> – parses resolved resources</li>
    <li><strong>Placeholder</strong> – controls variable interpolation</li>
  </ul>

  <p>
    These components integrate seamlessly into the resolution pipeline
    without affecting existing behavior.
  </p>

  <p class="next-step">
    For advanced customization and extension points, continue with
    <a href="#advanced" data-section="advanced">Advanced Usage</a>.
  </p>
</section>
